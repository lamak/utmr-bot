# utmr-bot
Бот на питоне для опроса серверов ЕГАИС УТМ в локальной сети.
Построен на обертке python-telegram-bot

Работает в двух режимах:
- проверка одного УТМ
    Напишите боту `имя-сервера`, он вернет статус или ошибку (понимает есть ли пинг, доступен ли утм, подключен ли ключ). 
    Для проверки отправляется квитанция `QueryClients_v2` на свою же организацию
- быстрая проверка всех УТМ по списку в настройках
    Команда `/status` и бот опросит все УТМ, опрос быстрый, подробности опущены
- обновление настроек (фильтра) для всех УТМ
    Команда `/filter` и в результате будет список опрошенных УТМ, результат (запрос выполнен или не требовался)
- документация по диагностике УТМ
    Команда `/faq`

## Пример настроек в .env:
domain=.mydomain.local
#### токен телеграма полученный от @BotFather
token=abc...xyz
#### regexp, для проверки входящих сообщений
pattern="\w+[-]\w+" 
#### список УМТ для быстрого опроса
mongo=mongo:27017
#### socks5 прокси, mtproto не поддерживается (urlib)
proxy=socks5://10.0.0.0:1080